<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Networking & Cloud Computing Reviewer</title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-hover: #1d4ed8;
            --bg: #f3f4f6;
            --card-bg: #ffffff;
            --text: #1f2937;
            --correct-bg: #dcfce7;
            --correct-border: #22c55e;
            --correct-text: #14532d;
            --wrong-bg: #fee2e2;
            --wrong-border: #ef4444;
            --wrong-text: #7f1d1d;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Header */
        header {
            background-color: var(--primary);
            color: white;
            padding: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        h1 {
            margin: 0;
            font-size: 1.2rem;
        }

        .controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        button {
            cursor: pointer;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            font-weight: 600;
            transition: background 0.2s;
        }

        .btn-light {
            background: rgba(255,255,255,0.2);
            color: white;
        }
        .btn-light:hover {
            background: rgba(255,255,255,0.3);
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }
        .btn-primary:hover {
            background: var(--primary-hover);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }
        .btn-outline:hover {
            background: #eff6ff;
        }

        /* Main Container */
        main {
            flex: 1;
            max-width: 800px;
            width: 100%;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .card {
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin-bottom: 1rem;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            color: #6b7280;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .question-text {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        /* Options */
        .options-grid {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .option-btn {
            width: 100%;
            text-align: left;
            padding: 1rem;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 6px;
            font-size: 1rem;
            color: var(--text);
            transition: all 0.2s;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--primary);
            background-color: #f8fafc;
        }

        .option-btn.correct {
            background-color: var(--correct-bg);
            border-color: var(--correct-border);
            color: var(--correct-text);
        }

        .option-btn.wrong {
            background-color: var(--wrong-bg);
            border-color: var(--wrong-border);
            color: var(--wrong-text);
        }

        /* Explanation */
        .explanation {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: #f0f9ff;
            border-left: 4px solid var(--primary);
            border-radius: 4px;
            display: none; /* Hidden by default */
        }

        .explanation.visible {
            display: block;
        }

        .explanation h4 {
            margin-top: 0;
            color: var(--primary);
        }

        /* Navigation Bar */
        .nav-bar {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
        }

        /* Modal for Map */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .q-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
            gap: 8px;
        }

        .q-cell {
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }

        .q-cell.current { border-color: var(--primary); border-width: 2px; }
        .q-cell.correct { background-color: var(--correct-bg); color: var(--correct-text); border-color: var(--correct-border); }
        .q-cell.wrong { background-color: var(--wrong-bg); color: var(--wrong-text); border-color: var(--wrong-border); }
        
        .shuffle-toggle {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            color: white;
        }

    </style>
</head>
<body>

<header>
    <h1>Net/Cloud Reviewer</h1>
    <div class="controls">
        <label class="shuffle-toggle">
            <input type="checkbox" id="shuffleCheck"> Randomize
        </label>
        <button class="btn-light" onclick="toggleMap()">Show All Questions</button>
        <button class="btn-light" style="background-color: #dc2626;" onclick="resetQuiz()">Reset</button>
    </div>
</header>

<main>
    <div class="card" id="quiz-card">
        <div class="question-header">
            <span id="q-progress">Question 1 of 49</span>
            <span id="q-status">Not Answered</span>
        </div>
        <div class="question-text" id="q-text">
            Loading...
        </div>
        <div class="options-grid" id="options-container">
            <!-- Options injected here -->
        </div>
        
        <div class="explanation" id="explanation-box">
            <h4>Explanation</h4>
            <p id="explanation-text"></p>
        </div>
    </div>

    <div class="nav-bar">
        <button class="btn-primary" onclick="prevQuestion()" id="btn-prev">Previous</button>
        <button class="btn-primary" onclick="nextQuestion()" id="btn-next">Next</button>
    </div>
</main>

<!-- Modal -->
<div class="modal" id="map-modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Question Map</h2>
            <button onclick="toggleMap()">Close</button>
        </div>
        <div class="q-grid" id="q-grid">
            <!-- Grid items -->
        </div>
    </div>
</div>

<script>
    // Data parsed from your request. 
    // Note: I have cleaned up the data and inferred correct answers based on the provided explanations and standard networking curriculum.
    const rawData = [
        {
            id: 1,
            q: "A company uses a cloud-based payroll system. Which cloud computing technology is this company using?",
            options: ["browser as a service (BaaS)", "infrastructure as a service (IaaS)", "software as a service (SaaS)", "wireless as a service (WaaS)"],
            correct: "software as a service (SaaS)",
            expl: "Curriculum Reference: Module 7.2. There is no such thing as BaaS. Infrastructure as a service (IaaS) is when key network devices such as routers and firewalls are leased from a provider. Wireless as a service (WaaS) is when a provider provides wireless connectivity at a fixed monthly cost. Payroll software is an application, hence SaaS."
        },
        {
            id: 2,
            q: "For a data center, what is the difference in the server virtualization data traffic compared with the traditional client-server model?",
            options: ["Data traffic from clients will be routed to multiple virtual servers.", "There are significant data exchanges between virtual servers.", "There is more data traffic flowing from virtual servers to clients.", "More network control traffic is generated between virtual servers and clients."],
            correct: "There are significant data exchanges between virtual servers.",
            expl: "In modern data centers with virtualization, 'East-West' traffic (traffic between servers) is significantly higher than traditional 'North-South' traffic due to virtual machine migration and inter-app communication."
        },
        {
            id: 3,
            q: "Which component in a traditional infrastructure device provides Layer 2 and Layer 3 functions to create data paths within a network?",
            options: ["data plane", "control plane", "adjacency table", "forwarding information base"],
            correct: "control plane",
            expl: "The Control Plane is responsible for populating the routing tables and ARP tables (L2/L3 functions) to determine paths. The Data Plane actually forwards the packets based on this information."
        },
        {
            id: 4,
            q: "Which network traffic management technology is a basic element in SDN implementations?",
            options: ["OpenFlow", "OpenStack", "IEEE 802.1aq", "Interface to the Routing System"],
            correct: "OpenFlow",
            expl: "OpenFlow was developed at Stanford University to manage traffic between routers, switches, and wireless access points and a controller. It is the original and widely implemented southbound API for SDN."
        },
        {
            id: 5,
            q: "Which type of hypervisor would most likely be used in a data center?",
            options: ["Type 2", "Type 1", "Nexus", "Hadoop"],
            correct: "Type 1",
            expl: "The two type of hypervisors are Type 1 and Type 2. Type 1 hypervisors (Bare Metal) are usually used on enterprise servers. Enterprise servers are most likely to be in a data center."
        },
        {
            id: 6,
            q: "Which is a characteristic of a Type 1 hypervisor?",
            options: ["installed directly on a server", "best suited for consumers and not for an enterprise environment", "does not require management console software", "installed on an existing operating system"],
            correct: "installed directly on a server",
            expl: "Type 1 hypervisors are installed directly on a server and are known as 'bare metal' solutions giving direct access to hardware resources."
        },
        {
            id: 7,
            q: "Which two layers of the OSI model are associated with SDN network control plane functions that make forwarding decisions?",
            options: ["Layer 1 and Layer 2", "Layer 2 and Layer 3", "Layer 3 and Layer 4", "Layer 4 and Layer 5"],
            correct: "Layer 2 and Layer 3",
            expl: "The SDN control plane uses the Layer 2 ARP table and the Layer 3 routing table to make decisions about forwarding traffic."
        },
        {
            id: 8,
            q: "What pre-populates the FIB on Cisco devices that use CEF to process packets?",
            options: ["the routing table", "the adjacency table", "the ARP table", "the DSP"],
            correct: "the routing table",
            expl: "CEF uses the FIB and adjacency table. The adjacency table is pre-populated by the ARP table and the FIB is pre-populated by the routing table."
        },
        {
            id: 9,
            q: "What is a function of the data plane of a network device?",
            options: ["sending information to the CPU for processing", "building the routing table", "resolving MAC addresses", "forwarding traffic flows"],
            correct: "forwarding traffic flows",
            expl: "Networking devices operate in two planes; the data plane and the control plane. The control plane maintains mechanisms using the CPU. The data plane forwards traffic flows."
        },
        {
            id: 10,
            q: "Which statement describes the concept of cloud computing?",
            options: ["separation of application from hardware", "separation of management plane from control plane", "separation of operating system from hardware", "separation of control plane from data plane"],
            correct: "separation of application from hardware",
            expl: "Cloud computing is used to separate the application or service from hardware. Virtualization separates the operating system from the hardware."
        },
        {
            id: 11,
            q: "Which cloud model provides services for a specific organization or entity?",
            options: ["a public cloud", "a hybrid cloud", "a private cloud", "a community cloud"],
            correct: "a private cloud",
            expl: "Private clouds are used to provide services and applications to a specific organization and may be set up within the private network of the organization."
        },
        {
            id: 12,
            q: "What two benefits are gained when an organization adopts cloud computing and virtualization?",
            options: ["provides a 'pay-as-you-go' model and enables rapid responses", "distributed processing of large data sets and elimination of cyber attacks", "increases dependence on onsite IT and rapid responses", "pay-as-you-go model and elimination of vulnerabilities"],
            correct: "provides a 'pay-as-you-go' model and enables rapid responses",
            expl: "Organizations can use virtualization to consolidate servers. Cloud computing allows organizations to scale their solutions as required (rapid response) and to pay only for the resources they require."
        },
        {
            id: 13,
            q: "Which type of Hypervisor is implemented when a user with a laptop running the Mac OS installs a Windows virtual OS instance?",
            options: ["type 2", "virtual machine", "type 1", "bare metal"],
            correct: "type 2",
            expl: "Type 2 hypervisors, also known as hosted hypervisors, are installed on top of an existing operating system, such as Mac OS, Windows, or Linux."
        },
        {
            id: 14,
            q: "A small company is considering moving many of its data center functions to the cloud. What are three advantages of this plan?",
            options: ["Pay for usage, scalability (increase/decrease), no equipment maintenance", "Fixed fee billing, own administration, scalability", "Single-tenant growth, fixed fee, no equipment concerns", "Own administration, pay for usage, single-tenant growth"],
            correct: "Pay for usage, scalability (increase/decrease), no equipment maintenance",
            expl: "Cloud services are billed by usage (not fixed fee usually), allow increasing/decreasing capacity, and remove the burden of maintaining physical equipment."
        },
        {
            id: 15,
            q: "How does virtualization help with disaster recovery within a data center?",
            options: ["support of live migration", "guarantee of power", "improvement of business practices", "supply of consistent air flow"],
            correct: "support of live migration",
            expl: "Live migration allows moving of one virtual server to another virtual server that could be in a different location that is some distance from the original data center."
        },
        {
            id: 16,
            q: "What technology allows users to access data anywhere and at any time?",
            options: ["Cloud computing", "virtualization", "micromarketing", "data analytics"],
            correct: "Cloud computing",
            expl: "Cloud computing allows organizations to eliminate the need for on-site IT equipment and allows access to services/data anywhere."
        },
        {
            id: 17,
            q: "Which action takes place in the assurance element of the IBN model?",
            options: ["verification and corrective action", "configuring systems", "translation of policies", "integrity checks"],
            correct: "verification and corrective action",
            expl: "The assurance element of the IBN model is concerned with end-to-end verification of network-wide behavior."
        },
        {
            id: 18,
            q: "Refer to the exhibit. Which data format is used to represent the data for network automation applications? (Assume generic context of key/value in braces)",
            options: ["XML", "YAML", "HTML", "JSON"],
            correct: "JSON",
            expl: "In JSON, the data known as an object is one or more key/value pairs enclosed in braces { }. XML uses tags. YAML uses indentation."
        },
        {
            id: 19,
            q: "What is the function of the key contained in most RESTful APIs?",
            options: ["It is the top-level object of the API query.", "It is used to authenticate the requesting source.", "It represents the main query components in the API request.", "It is used in the encryption of the message by an API request."],
            correct: "It is used to authenticate the requesting source.",
            expl: "Many RESTful APIs require a key. The key is used to identify the source of the request through authentication."
        },
        {
            id: 20,
            q: "Which two configuration management tools are developed using Ruby?",
            options: ["Puppet and Chef", "Ansible and SaltStack", "Chef and Ansible", "Puppet and SaltStack"],
            correct: "Puppet and Chef",
            expl: "Chef and Puppet are configuration management tools developed using Ruby. Ansible and SaltStack are developed using Python."
        },
        {
            id: 21,
            q: "Which term is used to describe a set of instructions for execution by the configuration management tool Puppet?",
            options: ["Playbook", "Cookbook", "Manifest", "Pillar"],
            correct: "Manifest",
            expl: "The configuration management tool Puppet uses the name Manifest to describe the set of instructions to be executed."
        },
        {
            id: 22,
            q: "Which term is used to describe a set of instructions for execution by the configuration management tool SaltStack?",
            options: ["Cookbook", "Manifest", "Pillar", "Playbook"],
            correct: "Pillar",
            expl: "The configuration management tool SaltStack uses the name Pillar to describe the set of instructions to be executed."
        },
        {
            id: 23,
            q: "Which scenario describes the use of a public API?",
            options: ["It requires a license.", "It can be used with no restrictions.", "It is used between a company and its business partners.", "It is used only within an organization."],
            correct: "It can be used with no restrictions.",
            expl: "Public, or open, APIs have no restrictions (though some might require a free key) and are available to the public."
        },
        {
            id: 24,
            q: "What is YAML?",
            options: ["It is a scripting language.", "It is a data format and superset of JSON.", "It is a compiled programming language.", "It is a web application."],
            correct: "It is a data format and superset of JSON.",
            expl: "YAML Ain't Markup Language (YAML) is a data format used by applications to store and transport data. YAML is considered a superset of JSON."
        },
        {
            id: 25,
            q: "Which RESTFul operation corresponds to the HTTP GET method?",
            options: ["post", "patch", "update", "read"],
            correct: "read",
            expl: "RESTful operations correspond to HTTP methods: POST > Create, GET > Read, PUT/PATCH > Update, DELETE > Delete."
        },
        {
            id: 26,
            q: "Which technology virtualizes the network control plane and moves it to a centralized controller?",
            options: ["SDN", "fog computing", "cloud computing", "IaaS"],
            correct: "SDN",
            expl: "SDN virtualizes the control plane and moves it to a centralized network controller."
        },
        {
            id: 27,
            q: "What are two functions of hypervisors?",
            options: ["manage virtual machines and allocate physical system resources", "partition hard drive and protect host from malware", "share antivirus and partition hard drive", "protect host from malware and allocate resources"],
            correct: "manage virtual machines and allocate physical system resources",
            expl: "The hypervisor creates and manages virtual machines on a host computer and allocates physical system resources to them."
        },
        {
            id: 28,
            q: "What is a difference between the functions of Cloud computing and virtualization?",
            options: ["Cloud computing requires hypervisor technology whereas virtualization is a fault tolerance technology.", "Cloud computing separates the application from the hardware whereas virtualization separates the OS from the underlying hardware.", "Cloud computing provides services on web-based access whereas virtualization provides services on data access.", "Cloud computing utilizes data center technology whereas virtualization is not used in data centers."],
            correct: "Cloud computing separates the application from the hardware whereas virtualization separates the OS from the underlying hardware.",
            expl: "Cloud computing separates the application from the hardware. Virtualization separates the OS from the underlying hardware."
        },
        {
            id: 29,
            q: "How is the YAML data format structure different from JSON?",
            options: ["It uses indentations.", "It uses end tags.", "It uses hierarchical levels of nesting.", "It uses brackets and commas."],
            correct: "It uses indentations.",
            expl: "The structure in YAML is defined by indentations rather than brackets and commas."
        },
        {
            id: 30,
            q: "What is the most widely used API for web services?",
            options: ["XML-RPC", "SOAP", "JSON-RPC", "REST"],
            correct: "REST",
            expl: "REST accounts for more than 80% of all API types used for web services."
        },
        {
            id: 31,
            q: "What is REST?",
            options: ["It is a way to store and interchange data in a structured format.", "It is an architecture style for designing web service applications.", "It is a human readable data structure.", "It is a protocol that allows administrators to manage nodes on an IP network."],
            correct: "It is an architecture style for designing web service applications.",
            expl: "REST is not a protocol or service, but rather a style of software architecture for designing web service applications."
        },
        {
            id: 32,
            q: "What is a difference between the XML and HTML data formats?",
            options: ["XML does not use predefined tags whereas HTML does use predefined tags.", "XML encloses data within a pair of tags whereas HTML uses a pair of quotation makes.", "XML formats data in binary whereas HTML formats data in plain text.", "XML does not require indentation for each key/value pair but HTML does."],
            correct: "XML does not use predefined tags whereas HTML does use predefined tags.",
            expl: "Unlike HTML, XML uses no predefined tags or document structure; it is a meta-language."
        },
        {
            id: 33,
            q: "To avoid purchasing new hardware, a company wants to take advantage of idle system resources and consolidate the number of servers while allowing for multiple operating systems on a single hardware platform. What service or technology would support this requirement?",
            options: ["dedicated servers", "Cisco ACI", "virtualization", "software defined networking"],
            correct: "virtualization",
            expl: "Virtualization allows running multiple operating systems (VMs) on a single hardware platform, consolidating resources."
        },
        {
            id: 34,
            q: "In the RESTful API request '.../directions/v2/route?outFormat=json&key=KEY...', which part represents the 'format'?",
            options: ["outFormat=json", "key=KEY", "directions/v2/route", "http://www.mapquestapi.com"],
            correct: "outFormat=json",
            expl: "Matching components: Resources=directions/v2/route, Parameters=from=...&to=..., Query=outFormat=json&key=... (includes format), Format specifically is outFormat=json."
        },
        {
            id: 35,
            q: "Which cloud computing opportunity would provide the use of network hardware such as routers and switches for a particular company?",
            options: ["software as a service (SaaS)", "wireless as a service (WaaS)", "infrastructure as a service (IaaS)", "browser as a service (BaaS)"],
            correct: "infrastructure as a service (IaaS)",
            expl: "Routers, switches, and firewalls are infrastructure devices that can be provided in the cloud via IaaS."
        },
        {
            id: 36,
            q: "What component is considered the brains of the ACI architecture and translates application policies?",
            options: ["the Application Network Profile endpoints", "the Nexus 9000 switch", "the hypervisor", "the Application Policy Infrastructure Controller"],
            correct: "the Application Policy Infrastructure Controller",
            expl: "The APIC (Application Policy Infrastructure Controller) serves as the brains of the ACI architecture."
        },
        {
            id: 37,
            q: "Which statement describes the concept of cloud computing? (Repeated concept)",
            options: ["separation of management plane from control plane", "separation of control plane from data plane", "separation of application from hardware", "separation of operating system from hardware"],
            correct: "separation of application from hardware",
            expl: "Cloud computing separates the application/service from hardware."
        },
        {
            id: 38,
            q: "In which situation would a partner API be appropriate?",
            options: ["an internet search engine allowing developers to integrate the search engine into their own software applications", "company sales staff accessing internal sales data from their mobile devices", "someone creating an account on an external app or website by using his or her social media credentials", "a vacation service site interacting with hotel databases to display information from all the hotels on its web site"],
            correct: "a vacation service site interacting with hotel databases to display information from all the hotels on its web site",
            expl: "Partner APIs facilitate communication and integration of software between a company and its business partners (e.g., travel agent and hotel chains)."
        },
        {
            id: 39,
            q: "Because of enormous growth in web traffic, a company has planned to purchase additional servers to help handle the web traffic. What service or technology would support this requirement?",
            options: ["virtualization", "data center", "cloud services", "dedicated servers"],
            correct: "cloud services",
            expl: "Cloud services allow for rapid scaling (elasticity) to handle traffic growth without purchasing and installing physical hardware."
        },
        {
            id: 40,
            q: "ABCTech is investigating the use of automation for some of its products. In order to control and test these products, the programmers require Windows, Linux, and MAC OS on their computers. What service or technology would support this requirement?",
            options: ["dedicated servers", "software defined networking", "virtualization", "Cisco ACI"],
            correct: "virtualization",
            expl: "Virtualization allows running multiple different OS instances (Windows, Linux, Mac) on a single computer simultaneously."
        },
        {
            id: 41,
            q: "What are three components used in the query portion of a typical RESTful API request?",
            options: ["API server, protocol, resources", "format, parameters, key", "protocol, format, key", "resources, API server, parameters"],
            correct: "format, parameters, key",
            expl: "The query portion includes the Format (json/xml), Key (auth), and Parameters (specific info)."
        },
        {
            id: 42,
            q: "A company has recently become multinational. Employees are working remotely, in different time zones, and they need access to company services from any place at any time. What service or technology would support this requirement?",
            options: ["dedicated servers", "cloud services", "Cisco ACI", "virtualization"],
            correct: "cloud services",
            expl: "Cloud services provide 'Anywhere, Anytime' access."
        },
        {
            id: 43,
            q: "Following a multicontinent advertising campaign for a new product, a company finds its client database and volume of orders are overloading its on-site computer systems but the company does not have any room to expand. What service or technology would support this requirement?",
            options: ["cloud services", "dedicated servers", "data center", "virtualization"],
            correct: "cloud services",
            expl: "Cloud services allow offloading processing and storage to a provider when on-site resources are maxed out (Hybrid cloud/bursting)."
        },
        {
            id: 44,
            q: "A network administrator has been tasked with creating a disaster recovery plan. As part of this plan, the administrator is looking for a backup site for all of the data on the company servers. What service or technology would support this requirement?",
            options: ["virtualization", "software defined networking", "data center", "dedicated servers"],
            correct: "data center",
            expl: "While Cloud is a valid option, in this specific context of choices, a Data Center (remote) provides the physical location for a backup site."
        },
        {
            id: 45,
            q: "Which is a requirement of a site-to-site VPN?",
            options: ["It requires hosts to use VPN client software to encapsulate traffic.", "It requires a VPN gateway at each end of the tunnel to encrypt and decrypt traffic.", "It requires the placement of a VPN server at the edge of the company network.", "It requires a client/server architecture."],
            correct: "It requires a VPN gateway at each end of the tunnel to encrypt and decrypt traffic.",
            expl: "Site-to-site VPNs are static and connect entire networks using gateways. Hosts have no knowledge of the VPN (no client software needed)."
        },
        {
            id: 46,
            q: "Which statement describes an important characteristic of a site-to-site VPN?",
            options: ["It must be statically set up.", "After the initial connection is established, it can dynamically change connection information.", "It requires using a VPN client on the host PC.", "It is commonly implemented over dialup and cable modem networks."],
            correct: "It must be statically set up.",
            expl: "A site-to-site VPN is created between the network devices of two separate networks. The VPN is static and stays established."
        },
        {
            id: 47,
            q: "Which protocol is attacked when a cybercriminal provides an invalid gateway in order to create a man-in-the-middle attack?",
            options: ["DHCP", "ICMP", "DNS", "HTTP or HTTPS"],
            correct: "DHCP",
            expl: "A cybercriminal could set up a rogue DHCP server that provides a wrong default gateway to intercept traffic."
        },
        {
            id: 48,
            q: "In which TCP attack is the cybercriminal attempting to overwhelm a target host with half-open TCP connections?",
            options: ["reset attack", "session hijacking attack", "SYN flood attack", "port scan attack"],
            correct: "SYN flood attack",
            expl: "In a TCP SYN flood attack, the attacker sends continuous SYN requests, causing the target to wait for ACKs that never arrive, using up resources."
        },
        {
            id: 49,
            q: "Which statement describes a VPN?",
            options: ["VPNs use logical connections to create public networks through the Internet.", "VPNs use open source virtualization software to create the tunnel through the Internet.", "VPNs use dedicated physical connections to transfer data between remote users.", "VPNs use virtual connections to create a private network through a public network."],
            correct: "VPNs use virtual connections to create a private network through a public network.",
            expl: "A VPN creates a private tunnel over a public infrastructure (like the Internet)."
        }
    ];

    // State
    let currentIndex = 0;
    let userAnswers = {}; // Format: { qId: { selected: "option", isCorrect: boolean } }
    let currentQuestions = [...rawData]; // Start with normal order

    // Utils
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // Logic
    function init() {
        const shuffleCheck = document.getElementById('shuffleCheck');
        
        shuffleCheck.addEventListener('change', (e) => {
            if (e.target.checked) {
                // Shuffle questions
                currentQuestions = shuffleArray([...rawData]);
            } else {
                // Restore order
                currentQuestions = [...rawData];
            }
            // Reset current index to 0 to avoid bounds errors
            currentIndex = 0;
            loadQuestion();
        });

        loadQuestion();
    }

    function loadQuestion() {
        const q = currentQuestions[currentIndex];
        
        // Update Header
        document.getElementById('q-progress').innerText = `Question ${currentIndex + 1} of ${currentQuestions.length}`;
        const statusSpan = document.getElementById('q-status');
        
        // Check if answered
        const saved = userAnswers[q.id];
        if(saved) {
            statusSpan.innerText = saved.isCorrect ? "Correct" : "Incorrect";
            statusSpan.style.color = saved.isCorrect ? "var(--correct-text)" : "var(--wrong-text)";
        } else {
            statusSpan.innerText = "Not Answered";
            statusSpan.style.color = "#6b7280";
        }

        // Render Text
        document.getElementById('q-text').innerText = q.q;

        // Render Options
        const optContainer = document.getElementById('options-container');
        optContainer.innerHTML = '';

        let displayOptions = [...q.options];
        // If shuffle is on, shuffle options too, unless it's already answered (to keep UI consistent)
        if(document.getElementById('shuffleCheck').checked && !saved) {
            displayOptions = shuffleArray(displayOptions);
        } else if (saved && saved.shuffledOptions) {
            // Keep the same order as when they answered
            displayOptions = saved.shuffledOptions;
        }

        displayOptions.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt;
            
            // Logic for styling if answered
            if(saved) {
                btn.disabled = true;
                if(opt === q.correct) {
                    btn.classList.add('correct');
                }
                if(opt === saved.selected && !saved.isCorrect) {
                    btn.classList.add('wrong');
                }
            } else {
                btn.onclick = () => submitAnswer(q.id, opt, displayOptions);
            }
            
            optContainer.appendChild(btn);
        });

        // Explanation
        const expBox = document.getElementById('explanation-box');
        const expText = document.getElementById('explanation-text');
        
        if(saved) {
            expBox.classList.add('visible');
            expText.innerText = q.expl;
        } else {
            expBox.classList.remove('visible');
        }

        // Nav Buttons
        document.getElementById('btn-prev').disabled = currentIndex === 0;
        document.getElementById('btn-next').disabled = currentIndex === currentQuestions.length - 1;
    }

    function submitAnswer(qId, selected, currentOptionOrder) {
        const q = rawData.find(x => x.id === qId);
        const isCorrect = selected === q.correct;

        userAnswers[qId] = {
            selected: selected,
            isCorrect: isCorrect,
            shuffledOptions: currentOptionOrder // Save order so it doesn't jump if we return
        };

        loadQuestion();
    }

    function prevQuestion() {
        if(currentIndex > 0) {
            currentIndex--;
            loadQuestion();
        }
    }

    function nextQuestion() {
        if(currentIndex < currentQuestions.length - 1) {
            currentIndex++;
            loadQuestion();
        }
    }

    function toggleMap() {
        const modal = document.getElementById('map-modal');
        const grid = document.getElementById('q-grid');
        
        if(modal.style.display === 'flex') {
            modal.style.display = 'none';
        } else {
            grid.innerHTML = '';
            currentQuestions.forEach((q, index) => {
                const cell = document.createElement('div');
                cell.className = 'q-cell';
                cell.innerText = index + 1;
                
                if(index === currentIndex) cell.classList.add('current');
                
                const saved = userAnswers[q.id];
                if(saved) {
                    cell.classList.add(saved.isCorrect ? 'correct' : 'wrong');
                }

                cell.onclick = () => {
                    currentIndex = index;
                    loadQuestion();
                    modal.style.display = 'none';
                };

                grid.appendChild(cell);
            });
            modal.style.display = 'flex';
        }
    }

    function resetQuiz() {
        if(confirm("Are you sure you want to reset all progress?")) {
            userAnswers = {};
            currentIndex = 0;
            loadQuestion();
            // Close map if open
            document.getElementById('map-modal').style.display = 'none';
        }
    }

    // Initialize
    init();

</script>

</body>
</html>